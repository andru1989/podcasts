{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport ChannelGrid from '../components/ChannelGrid';\nimport Layout from '../components/Layout';\nimport PodcastListWithClick from '../components/PodcastListWithClick';\nimport Error from './_error';\nimport PodcastPlayer from '../components/PodcastPlayer';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"openPodcast\", function (event, podcast) {\n      event.preventDefault();\n\n      _this.setState({\n        openPodcast: podcast\n      });\n    });\n\n    _this.state = {\n      openPodcast: null\n    };\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          channel = _this$props.channel,\n          audioClips = _this$props.audioClips,\n          series = _this$props.series,\n          statusCode = _this$props.statusCode;\n      var openPodcast = this.state.openPodcast;\n\n      if (statusCode !== 200) {\n        return React.createElement(Error, {\n          statusCode: statusCode\n        });\n      }\n\n      return React.createElement(Layout, {\n        title: channel.title\n      }, React.createElement(\"div\", {\n        style: {\n          backgroundImage: \"url(\".concat(channel.urls.banner_image.original, \")\")\n        },\n        className: \"jsx-530371424\" + \" \" + \"banner\"\n      }), openPodcast && React.createElement(\"div\", {\n        className: \"jsx-530371424\" + \" \" + \"modal\"\n      }, \"Hay un podcast abierto\"), React.createElement(\"h1\", {\n        className: \"jsx-530371424\"\n      }, channel.title), series.length > 0 && React.createElement(\"div\", {\n        className: \"jsx-530371424\"\n      }, React.createElement(\"h2\", {\n        className: \"jsx-530371424\"\n      }, \"Series\"), React.createElement(ChannelGrid, {\n        channels: series\n      })), React.createElement(PodcastListWithClick, {\n        podcasts: audioClips,\n        onClickPodcast: this.openPodcast\n      }), React.createElement(_JSXStyle, {\n        id: \"530371424\"\n      }, \".modal.jsx-530371424{position:fixed;top:0;left:0;right:0;bottom:0;background:black;z-index:99999;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmRydTE5ODkvTUVHQS9MYWJzL3JlYWN0L3BvZGNhc3RzL3BhZ2VzL2NoYW5uZWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBOEVvQixBQUc0QixlQUNULE1BQ0MsT0FDQyxRQUNDLFNBQ1EsaUJBQ0gsY0FDaEIiLCJmaWxlIjoiL1VzZXJzL2FuZHJ1MTk4OS9NRUdBL0xhYnMvcmVhY3QvcG9kY2FzdHMvcGFnZXMvY2hhbm5lbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGFubmVsR3JpZCBmcm9tICcuLi9jb21wb25lbnRzL0NoYW5uZWxHcmlkJztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9MYXlvdXQnO1xuaW1wb3J0IFBvZGNhc3RMaXN0V2l0aENsaWNrIGZyb20gJy4uL2NvbXBvbmVudHMvUG9kY2FzdExpc3RXaXRoQ2xpY2snO1xuaW1wb3J0IEVycm9yIGZyb20gJy4vX2Vycm9yJztcbmltcG9ydCBQb2RjYXN0UGxheWVyIGZyb20gJy4uL2NvbXBvbmVudHMvUG9kY2FzdFBsYXllcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcylcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgb3BlblBvZGNhc3Q6IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0SW5pdGlhbFByb3BzKHsgcXVlcnksIHJlcyB9KSB7XG4gICAgbGV0IGlkQ2hhbm5lbCA9IHF1ZXJ5LmlkXG5cbiAgICB0cnkge1xuICAgICAgbGV0IFtyZXFDaGFubmVsLCByZXFDbGlwcywgcmVxU2VyaWVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZmV0Y2goYGh0dHBzOi8vYXBpLmF1ZGlvYm9vbS5jb20vY2hhbm5lbHMvJHtpZENoYW5uZWx9YCksXG4gICAgICAgIGZldGNoKGBodHRwczovL2FwaS5hdWRpb2Jvb20uY29tL2NoYW5uZWxzLyR7aWRDaGFubmVsfS9hdWRpb19jbGlwc2ApLFxuICAgICAgICBmZXRjaChgaHR0cHM6Ly9hcGkuYXVkaW9ib29tLmNvbS9jaGFubmVscy8ke2lkQ2hhbm5lbH0vY2hpbGRfY2hhbm5lbHNgKVxuICAgICAgXSlcblxuICAgICAgaWYgKHJlcUNoYW5uZWwuc3RhdHVzID49IDQwMCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IHJlcUNoYW5uZWwuc3RhdHVzXG4gICAgICAgIHJldHVybiB7IGNoYW5uZWw6IG51bGwsIGF1ZGlvQ2xpcHM6IG51bGwsIHNlcmllczogbnVsbCwgc3RhdHVzQ29kZTogNDA0IH1cbiAgICAgIH1cblxuICAgICAgbGV0IGRhdGFDaGFubmVsID0gYXdhaXQgcmVxQ2hhbm5lbC5qc29uKClcbiAgICAgIGxldCBjaGFubmVsID0gZGF0YUNoYW5uZWwuYm9keS5jaGFubmVsXG5cbiAgICAgIGxldCBkYXRhQ2xpcHMgPSBhd2FpdCByZXFDbGlwcy5qc29uKClcbiAgICAgIGxldCBhdWRpb0NsaXBzID0gZGF0YUNsaXBzLmJvZHkuYXVkaW9fY2xpcHNcblxuICAgICAgbGV0IGRhdGFTZXJpZXMgPSBhd2FpdCByZXFTZXJpZXMuanNvbigpXG4gICAgICBsZXQgc2VyaWVzID0gZGF0YVNlcmllcy5ib2R5LmNoYW5uZWxzXG5cbiAgICAgIHJldHVybiB7IGNoYW5uZWwsIGF1ZGlvQ2xpcHMsIHNlcmllcywgc3RhdHVzQ29kZTogMjAwIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiB7IGNoYW5uZWw6IG51bGwsIGF1ZGlvQ2xpcHM6IG51bGwsIHNlcmllczogbnVsbCwgc3RhdHVzQ29kZTogNTAzIH1cbiAgICB9XG4gIH1cblxuICBvcGVuUG9kY2FzdCA9IChldmVudCwgcG9kY2FzdCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIG9wZW5Qb2RjYXN0OiBwb2RjYXN0XG4gICAgfSlcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNoYW5uZWwsIGF1ZGlvQ2xpcHMsIHNlcmllcywgc3RhdHVzQ29kZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgb3BlblBvZGNhc3QgfSA9IHRoaXMuc3RhdGVcblxuICAgIGlmIChzdGF0dXNDb2RlICE9PSAyMDApIHtcbiAgICAgIHJldHVybiA8RXJyb3Igc3RhdHVzQ29kZT17c3RhdHVzQ29kZX0gLz5cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dCB0aXRsZT17Y2hhbm5lbC50aXRsZX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmFubmVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZEltYWdlOiBgdXJsKCR7Y2hhbm5lbC51cmxzLmJhbm5lcl9pbWFnZS5vcmlnaW5hbH0pYCB9fSAvPlxuXG4gICAgICAgIHsgb3BlblBvZGNhc3QgJiZcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsXCI+SGF5IHVuIHBvZGNhc3QgYWJpZXJ0bzwvZGl2PlxuICAgICAgICB9XG5cbiAgICAgICAgPGgxPntjaGFubmVsLnRpdGxlfTwvaDE+XG5cbiAgICAgICAge3Nlcmllcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxoMj5TZXJpZXM8L2gyPlxuICAgICAgICAgICAgPENoYW5uZWxHcmlkIGNoYW5uZWxzPXtzZXJpZXN9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cblxuICAgICAgICA8UG9kY2FzdExpc3RXaXRoQ2xpY2sgcG9kY2FzdHM9e2F1ZGlvQ2xpcHN9IG9uQ2xpY2tQb2RjYXN0PXt0aGlzLm9wZW5Qb2RjYXN0fSAvPlxuXG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAubW9kYWwge1xuICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICAgICAgdG9wOiAwO1xuICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogYmxhY2s7XG4gICAgICAgICAgICB6LWluZGV4OiA5OTk5OTtcbiAgICAgICAgICB9XG4gICAgICAgIGB9PC9zdHlsZT5cbiAgICAgIDwvTGF5b3V0PlxuICAgIClcbiAgfVxufSJdfQ== */\\n/*@ sourceURL=/Users/andru1989/MEGA/Labs/react/podcasts/pages/channel.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var query, res, idChannel, _ref2, _ref3, reqChannel, reqClips, reqSeries, dataChannel, channel, dataClips, audioClips, dataSeries, series;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query, res = _ref.res;\n                idChannel = query.id;\n                _context.prev = 2;\n                _context.next = 5;\n                return _Promise.all([fetch(\"https://api.audioboom.com/channels/\".concat(idChannel)), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/audio_clips\")), fetch(\"https://api.audioboom.com/channels/\".concat(idChannel, \"/child_channels\"))]);\n\n              case 5:\n                _ref2 = _context.sent;\n                _ref3 = _slicedToArray(_ref2, 3);\n                reqChannel = _ref3[0];\n                reqClips = _ref3[1];\n                reqSeries = _ref3[2];\n\n                if (!(reqChannel.status >= 400)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                res.statusCode = reqChannel.status;\n                return _context.abrupt(\"return\", {\n                  channel: null,\n                  audioClips: null,\n                  series: null,\n                  statusCode: 404\n                });\n\n              case 13:\n                _context.next = 15;\n                return reqChannel.json();\n\n              case 15:\n                dataChannel = _context.sent;\n                channel = dataChannel.body.channel;\n                _context.next = 19;\n                return reqClips.json();\n\n              case 19:\n                dataClips = _context.sent;\n                audioClips = dataClips.body.audio_clips;\n                _context.next = 23;\n                return reqSeries.json();\n\n              case 23:\n                dataSeries = _context.sent;\n                series = dataSeries.body.channels;\n                return _context.abrupt(\"return\", {\n                  channel: channel,\n                  audioClips: audioClips,\n                  series: series,\n                  statusCode: 200\n                });\n\n              case 28:\n                _context.prev = 28;\n                _context.t0 = _context[\"catch\"](2);\n                return _context.abrupt(\"return\", {\n                  channel: null,\n                  audioClips: null,\n                  series: null,\n                  statusCode: 503\n                });\n\n              case 31:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 28]]);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/andru1989/MEGA/Labs/react/podcasts/pages/channel.js"],"names":["ChannelGrid","Layout","PodcastListWithClick","Error","PodcastPlayer","props","event","podcast","preventDefault","setState","openPodcast","state","channel","audioClips","series","statusCode","title","backgroundImage","urls","banner_image","original","length","query","res","idChannel","id","all","fetch","reqChannel","reqClips","reqSeries","status","json","dataChannel","body","dataClips","audio_clips","dataSeries","channels","React","Component"],"mappings":"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","sourcesContent":["import ChannelGrid from '../components/ChannelGrid';\nimport Layout from '../components/Layout';\nimport PodcastListWithClick from '../components/PodcastListWithClick';\nimport Error from './_error';\nimport PodcastPlayer from '../components/PodcastPlayer';\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      openPodcast: null\n    }\n  }\n\n  static async getInitialProps({ query, res }) {\n    let idChannel = query.id\n\n    try {\n      let [reqChannel, reqClips, reqSeries] = await Promise.all([\n        fetch(`https://api.audioboom.com/channels/${idChannel}`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/audio_clips`),\n        fetch(`https://api.audioboom.com/channels/${idChannel}/child_channels`)\n      ])\n\n      if (reqChannel.status >= 400) {\n        res.statusCode = reqChannel.status\n        return { channel: null, audioClips: null, series: null, statusCode: 404 }\n      }\n\n      let dataChannel = await reqChannel.json()\n      let channel = dataChannel.body.channel\n\n      let dataClips = await reqClips.json()\n      let audioClips = dataClips.body.audio_clips\n\n      let dataSeries = await reqSeries.json()\n      let series = dataSeries.body.channels\n\n      return { channel, audioClips, series, statusCode: 200 }\n    } catch(e) {\n      return { channel: null, audioClips: null, series: null, statusCode: 503 }\n    }\n  }\n\n  openPodcast = (event, podcast) => {\n    event.preventDefault()\n    this.setState({\n      openPodcast: podcast\n    })\n  }\n\n  render() {\n    const { channel, audioClips, series, statusCode } = this.props\n    const { openPodcast } = this.state\n\n    if (statusCode !== 200) {\n      return <Error statusCode={statusCode} />\n    }\n\n    return (\n      <Layout title={channel.title}>\n        <div className=\"banner\" style={{ backgroundImage: `url(${channel.urls.banner_image.original})` }} />\n\n        { openPodcast &&\n          <div className=\"modal\">Hay un podcast abierto</div>\n        }\n\n        <h1>{channel.title}</h1>\n\n        {series.length > 0 &&\n          <div>\n            <h2>Series</h2>\n            <ChannelGrid channels={series} />\n          </div>\n        }\n\n        <PodcastListWithClick podcasts={audioClips} onClickPodcast={this.openPodcast} />\n\n        <style jsx>{`\n          .modal {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: black;\n            z-index: 99999;\n          }\n        `}</style>\n      </Layout>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}